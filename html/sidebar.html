<!-- Sidebar Toggle Button -->
<button id="sidebar-toggle-button" aria-label="Toggle Settings Sidebar" aria-expanded="false">☰</button>

<!-- Settings Sidebar (HTML Structure remains the same) -->
<div id="settings-sidebar" class="sidebar">
    <h2>Quiz Settings</h2>
    <div class="sidebar-section">
        <h3>Categories</h3>
        <div id="filter-categories-list" class="filter-options-list">
            <p>Load data to see categories.</p>
        </div>
        <button id="clear-categories-filter" class="clear-filter-button">Clear Categories</button>
    </div>
    <div class="sidebar-section">
        <h3>Providers</h3>
        <div id="filter-providers-list" class="filter-options-list">
            <p>Load data to see providers.</p>
        </div>
        <button id="clear-providers-filter" class="clear-filter-button">Clear Providers</button>
    </div>
    <div class="sidebar-section">
        <h3>Attempts</h3>
        <label><input type="radio" name="filter-attempts" value="all"> Show All Questions</label>
        <label><input type="radio" name="filter-attempts" value="attempted"> Questions with Attempts</label>
        <label><input type="radio" name="filter-attempts" value="unattempted" checked> Questions without Attempts</label>
        <label><input type="radio" name="filter-attempts" value="incorrect"> Questions with Incorrect Attempts (Any)</label>
        <label><input type="radio" name="filter-attempts" value="incorrect_only"> Show Incorrectly Answered Only (Last Attempt)</label>
        <button id="clear-attempts-filter" class="clear-filter-button">Reset Attempts Filter</button>
    </div>

    <div class="sidebar-section">
        <h3>Notes</h3>
        <label><input type="radio" name="filter-notes" value="all" checked> Show All Questions</label>
        <label><input type="radio" name="filter-notes" value="with-notes"> Questions with Notes</label>
        <label><input type="radio" name="filter-notes" value="without-notes"> Questions without Notes</label>
        <button id="clear-notes-filter" class="clear-filter-button">Reset Notes Filter</button>
    </div>

    <div class="sidebar-section">
        <h3>Order</h3>
        <label><input type="checkbox" id="filter-scramble" checked> Scramble Question Order</label>
    </div>
    <div class="sidebar-section">
        <h3>Timer Settings</h3>
        <div class="setting-item">
            <label for="session-time-limit">Session Time Limit (minutes):</label>
            <input type="number" id="session-time-limit" min="1" max="240" value="30" step="1">
        </div>
        <div class="setting-item">
            <label for="question-limit">Number of Questions (Sprint):</label>
            <input type="number" id="question-limit" min="1" max="200" value="20" step="1">
        </div>
        <div class="setting-item">
            <label><input type="checkbox" id="enable-session-timer"> Enable Session Timer</label>
        </div>
        <div class="setting-item">
            <label><input type="checkbox" id="enable-question-timer"> Enable Question Timer</label>
        </div>
        <div class="setting-item">
            <label><input type="checkbox" id="enable-stopwatch" checked> Enable Stopwatch</label>
        </div>
        <div class="setting-item">
            <label for="question-time-limit">Question Time Limit (seconds):</label>
            <input type="number" id="question-time-limit" min="10" max="600" value="90" step="5">
        </div>
    </div>

    <div class="sidebar-section">
        <h3>Exam Mode</h3>
        <div class="setting-item">
            <label><input type="checkbox" id="setting-hide-answer"> Hide Answer After Submission</label>
            <p style="font-size: 0.8rem; color: var(--dark-gray); margin-top: 0.2rem;">(Review answers at the end or
                reveal individually)</p>
        </div>
    </div>


    <button id="apply-filters-button" disabled>Apply Filters & Start Quiz</button>
    <button id="close-sidebar-button">Close Settings</button>

    <div class="sidebar-footer">
        <!-- Buy me a coffee button -->
        <p class="small mt-2" style="text-align: center; margin-bottom: 5px;"><strong>Found this site
                helpful?</strong></p>
        <div style="text-align: center; margin-top: 5px; margin-bottom: 15px;">
            <script type="text/javascript" src="https://cdnjs.buymeacoffee.com/1.0.0/button.prod.min.js"
                data-name="bmc-button" data-slug="ansonlai" data-color="#FFDD00" data-emoji="" data-font="Lato"
                data-text="Buy me a coffee" data-outline-color="#000000" data-font-color="#000000"
                data-coffee-color="#ffffff"></script>
        </div>
        
        <!-- Data Controls Section -->
        <div id="sidebar-data-controls" class="sidebar-section">
            <h3>Data Management</h3>
            <div class="control-group">
                <label for="saveJsonButton">Export / Backup Data:</label>
                <button id="saveJsonButton" class="sidebar-button">Export Backup</button>
            </div>
            <div class="control-group">
                <label for="sidebar-jsonFile">Load New Data:</label>
                <input type="file" id="sidebar-jsonFile" accept=".json" style="width: 100%; margin-bottom: 0.5rem;">
                <div style="display: flex; gap: 0.5rem;">
                    <button id="sidebar-loadJsonButton" class="sidebar-button">Load File</button>
                    <button id="sidebar-loadSampleButton" class="sidebar-button">Use Sample</button>
                </div>
            </div>
            <p class="small" style="margin-top: 0.5rem; color: var(--dark-gray);">
                ℹ️ Loading new data will replace your current questions but preserve your attempt history.
            </p>
        </div>
    </div>
</div>